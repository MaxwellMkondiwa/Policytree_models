"0","table_varieties=sort(xtabs(~LDS$D.varName))"
"0","table_varieties"
"1","LDS$D.varName
"
"1","             Aditya "
"1","           Bhrikuti "
"1","               BR26 "
"1","              DBW14 "
"1","
"
"1","                  1 "
"1","                  1 "
"1","                  1 "
"1","                  1 "
"1","
"
"1","          Dhanrekha "
"1","            Diamond "
"1","             HD3118 "
"1","             Janaki "
"1","
"
"1","                  1 "
"1","                  1 "
"1","                  1 "
"1","                  1 "
"1","
"
"1","              Maina "
"1","OtherDon't Remember "
"1","         OtherLocal "
"1","       OtherMicoGol "
"1","
"
"1","                  1 "
"1","                  1 "
"1","                  1 "
"1","                  1 "
"1","
"
"1","         OtherPooja "
"1","       Otherunknown "
"1","            Prabhat "
"1","             Radha4 "
"1","
"
"1","                  1 "
"1","                  1 "
"1","                  1 "
"1","                  1 "
"1","
"
"1","       SabourNirjal "
"1","         Suryamukhi "
"1","            Unknown "
"1","              Vijay "
"1","
"
"1","                  1 "
"1","                  1 "
"1","                  1 "
"1","                  1 "
"1","
"
"1","            BL 4341 "
"1","         Dhaulagiri "
"1","             HD2781 "
"1","             HD3059 "
"1","
"
"1","                  2 "
"1","                  2 "
"1","                  2 "
"1","                  2 "
"1","
"
"1","              KW412 "
"1","        OtherBansal "
"1","              UP306 "
"1","             HD3086 "
"1","
"
"1","                  2 "
"1","                  2 "
"1","                  2 "
"1","                  3 "
"1","
"
"1","                NL2 "
"1","         OtherAnshu "
"1","             WH1105 "
"1","               Baaz "
"1","
"
"1","                  3 "
"1","                  3 "
"1","                  3 "
"1","                  4 "
"1","
"
"1","             HD2824 "
"1","              other "
"1","              WH711 "
"1","             Gautam "
"1","
"
"1","                  4 "
"1","                  4 "
"1","                  4 "
"1","                  5 "
"1","
"
"1","               K307 "
"1","              WR544 "
"1","               C306 "
"1","            GK-7777 "
"1","
"
"1","                  6 "
"1","                  6 "
"1","                  7 "
"1","                  8 "
"1","
"
"1","            PBW2076 "
"1","             Sonali "
"1","             HD2985 "
"1","              DBW17 "
"1","
"
"1","                 10 "
"1","                 10 "
"1","                 11 "
"1","                 12 "
"1","
"
"1","           SUPER172 "
"1","       OtherUnknown "
"1","             HI1563 "
"1","              Ankur "
"1","
"
"1","                 12 "
"1","                 17 "
"1","                 23 "
"1","                 28 "
"1","
"
"1","             PBW550 "
"1","         ShriRam505 "
"1","           Sonalika "
"1","             Kundan "
"1","
"
"1","                 30 "
"1","                 32 "
"1","                 34 "
"1","                 46 "
"1","
"
"1","              Other "
"1","             PBW373 "
"1","              Local "
"1","             HD2733 "
"1","
"
"1","                 58 "
"1","                 80 "
"1","                109 "
"1","                111 "
"1","
"
"1","               RR21 "
"1","                NL1 "
"1","             HUW234 "
"1","        ShriRam 303 "
"1","
"
"1","                120 "
"1","                178 "
"1","                191 "
"1","                376 "
"1","
"
"1","             PBW502 "
"1","              Kedar "
"1","             PBW154 "
"1","               LOK1 "
"1","
"
"1","                401 "
"1","                442 "
"1","                589 "
"1","                621 "
"1","
"
"1","              UP262 "
"1","             HD2967 "
"1","             PBW343 "
"1","
"
"1","                885 "
"1","               1512 "
"1","               1616 "
"1","
"
"0","#LDSestim$D.q410_varName[LDSestim$D.q410_varName==""NL1""]=NA"
"0","LDSestim$D.q410_varName[LDSestim$D.q410_varName==""ShriRam 303""]=""SUPER303"""
"0",""
"0","LDSestim_variety=subset(LDSestim,LDSestim$D.q410_varName%in%c(""PBW343"",""UP262"",""LOK1"",""HD2967"",""PBW154"",""Kedar"",""SUPER303"",""PBW502"",""HD2733"",""HUW234"",""RR21"",""Local""))"
"0",""
"0","LDSestim_variety$D.q410_varName=ordered(LDSestim_variety$D.q410_varName,levels=c(""HD2967"",""Local"",""PBW343"",""UP262"",""LOK1"",""PBW154"",""Kedar"",""SUPER303"",""PBW502"",""HD2733"",""HUW234"",""RR21""))"
"0",""
"0","library(grf)"
"0","library(policytree)"
"0",""
"0","LDSestim_variety=subset(LDSestim_variety, select=c(""D.q410_varName"",""G.q5305_irrigTimes_cat"",""Sowing_Date_Schedule_rating_num"",""L.tonPerHectare"",""I.q5505_weedSeverity_num"",""I.q5509_diseaseSeverity_num"",""I.q5506_insectSeverity_num"",""I.q5502_droughtSeverity_num"",                                       ""Nperha"",""P2O5perha"",""variety_type_NMWV"",""G.q5305_irrigTimes"",""A.q111_fGenderdum"",""Weedmanaged"",""temp"",""precip"",""wc2.1_30s_elev"","
"0","                                                       ""M.q708_marketDistance"",""C.q306_cropLarestAreaHA"",""A.q112_fEdu_new_num"",""Caste_marginalized"",""Plot_owned"",""nitrogen_0.5cm"",""sand_0.5cm"", ""soc_5.15cm"",""O.largestPlotGPS.Latitude"",""O.largestPlotGPS.Longitude""))"
"0",""
"0",""
"0","library(tidyr)"
"0","LDSestim_variety=LDSestim_variety %>% drop_na()"
"0",""
"0",""
"0","Y_cf_variety=as.vector(LDSestim_variety$L.tonPerHectare)"
"0","## Causal random forest -----------------"
"0",""
"0","X_cf_variety=subset(LDSestim_variety, select=c(""I.q5505_weedSeverity_num"",""I.q5509_diseaseSeverity_num"",""I.q5506_insectSeverity_num"","
"0","                                                  ""Nperha"",""P2O5perha"",""G.q5305_irrigTimes"",""Sowing_Date_Schedule_rating_num"",""A.q111_fGenderdum"",""Weedmanaged"",""temp"",""precip"",""wc2.1_30s_elev"","
"0","                                                       ""M.q708_marketDistance"",""C.q306_cropLarestAreaHA"",""A.q112_fEdu_new_num"",""Caste_marginalized"",""Plot_owned"",""nitrogen_0.5cm"",""sand_0.5cm"", ""soc_5.15cm"",""O.largestPlotGPS.Latitude"",""O.largestPlotGPS.Longitude""))"
"0",""
"0",""
"0","W_cf_variety <- as.factor(LDSestim_variety$D.q410_varName)"
"0",""
"0","W.multi_variety.forest <- probability_forest(X_cf_variety, W_cf_variety,"
"0","  equalize.cluster.weights = FALSE,"
"0","  seed = 2"
"0",")"
"0","W.hat.multi.all_variety <- predict(W.multi_variety.forest, estimate.variance = TRUE)$predictions"
"0",""
"0",""
"0","Y.multi_variety.forest <- regression_forest(X_cf_variety, Y_cf_variety,"
"0","  equalize.cluster.weights = FALSE,"
"0","  seed = 2"
"0",")"
"0",""
"0","print(Y.multi_variety.forest)"
"1","GRF forest object of type"
"1"," "
"1","regression_forest"
"1"," "
"1","
"
"1","Number of trees:"
"1"," "
"1","2000"
"1"," "
"1","
"
"1","Number of training samples:"
"1"," "
"1","6895"
"1"," "
"1","
"
"1","Variable importance:"
"1"," "
"1","
"
"1","    1 "
"1","    2 "
"1","    3 "
"1","    4 "
"1","    5 "
"1","    6 "
"1","    7 "
"1","    8 "
"1","    9 "
"1","   10 "
"1","   11 "
"1","   12 "
"1","   13 "
"1","   14 "
"1","   15 "
"1","
"
"1","0.000 "
"1","0.000 "
"1","0.000 "
"1","0.014 "
"1","0.009 "
"1","0.190 "
"1","0.667 "
"1","0.000 "
"1","0.068 "
"1","0.001 "
"1","0.001 "
"1","0.003 "
"1","0.002 "
"1","0.002 "
"1","0.001 "
"1","
"
"1","   16 "
"1","   17 "
"1","   18 "
"1","   19 "
"1","   20 "
"1","   21 "
"1","   22 "
"1","
"
"1","0.000 "
"1","0.000 "
"1","0.001 "
"1","0.001 "
"1","0.003 "
"1","0.014 "
"1","0.019 "
"1","
"
"0","varimp.multi_variety <- variable_importance(Y.multi_variety.forest)"
"0","Y.hat.multi.all_variety <- predict(Y.multi_variety.forest, estimate.variance = TRUE)$predictions"
"0",""
"0",""
"0","multi_variety.forest <- multi_arm_causal_forest(X = X_cf_variety, Y = Y_cf_variety, W = W_cf_variety,W.hat =W.hat.multi.all_variety , Y.hat=Y.hat.multi.all_variety, seed=1234) "
"0",""
"0",""
"0",""
"0","multi_variety_ate=average_treatment_effect(multi_variety.forest, method=""AIPW"")"
"2","Warning: Estimated treatment propensities take values very close to 0 or 1 meaning some estimates may not be well identified. In particular, the minimum propensity estimates for each arm is
HD2967: 0 Local: 0 PBW343: 0 UP262: 0 LOK1: 0 PBW154: 0 Kedar: 0 SUPER303: 0 PBW502: 0 HD2733: 0 HUW234: 0 RR21: 0
and the maximum is
HD2967: 0.989 Local: 0.697 PBW343: 0.989 UP262: 0.999 LOK1: 0.94 PBW154: 0.947 Kedar: 0.986 SUPER303: 0.745 PBW502: 0.831 HD2733: 0.82 HUW234: 0.776 RR21: 0.703."
"0","multi_variety_ate"
